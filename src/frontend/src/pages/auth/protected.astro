---
import Layout from '../../layouts/Layout.astro'
import Section from '../../components/Section.astro'
import { ProtectedIsland } from '../../components/protectedIsland/protectedIsland.tsx'
---

<Layout title='Welcome to AstroX.'>
  <div class='container'>
    <Section>
      <h1>Protected Route</h1>
      <p>
        This page is protected by actix middleware and will not be served if you
        are not logged in.
      </p>
      <p>
        ‚ö†Ô∏è In development mode, you can access this page without logging in,
        because its served by the astro development server.
      </p>
      <p>
        üí° For testing actix features use the backend localhost set by default
        at port 8080.
      </p>

      <ProtectedIsland client:load />
    </Section>
    <Section>
      <h3>‚ÑπÔ∏è How it works:</h3>
      <ul>
        <li>The React component above calls <code>/api/protected</code></li>
        <li>If you're logged in, it will show the protected data</li>
        <li>If you're not logged in, it will show an unauthorized error</li>
        <li>
          External calls from tools like Postman or Curl without session cookies
          will be rejected
        </li>
      </ul>
    </Section>
  </div>
</Layout>
